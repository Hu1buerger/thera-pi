<?eclipse.ant.import?>
<project>
	<property name="junit.batchtest.todir" value="../dist-tests"/>

	<!-- Includes JUnit.jar and the main.classpath jars too -->
	<path id="tests.classpath">
	     <fileset dir="${dir.tests.binary.lib}"/>
	     <fileset dir="${dir.binary.lib}"/>
	</path>

	<!-- Compile tests -->
	<target depends="build, init" name="build-tests">
	    <echo message="Building tests"/>
	    <javac debug="true" debuglevel="${debuglevel}" destdir="bin-tests" includeantruntime="false" source="${source}" target="${target}">
		    <src path="tests"/>
		    <classpath refid="${projektname}.classpath"/>
		    <classpath refid="tests.classpath"/>
	    </javac>
	</target>
	<target depends="build-tests" name="JUnits">
		<echo message="Current working directory in parent: ${basedir}"/>
		<junit fork="true" maxmemory="128m" includeAntRuntime="true">
		    <classpath refid="${projektname}.classpath"/>
		    <classpath refid="tests.classpath"/>
		    <formatter type="plain"/>
		    <formatter type="xml"/>
		    <batchtest todir="${junit.batchtest.todir}">
			<fileset dir="${tests-classdir}"/>
		    </batchtest>
		</junit>
	</target>
</project>
